#  Cursor & Googleカレンダー連携ガイド

## 1. 目的

このガイドは、CursorのAIアシスタントとの対話を通じて、日々のToDoをGoogleカレンダーに簡単かつ自動的に登録するための手順を記録するものです。

## 2. 使用ツール

- **`gcalcli`**: Googleカレンダーをコマンドライン（ターミナル）から操作するためのツール。

## 3. 初回セットアップ（一度だけ）

このセクションの手順は、最初に一度だけ行います。

### 3.1. ツールのインストール

`gcalcli`がインストールされていない場合、以下のコマンドでインストールします。

```sh
brew install gcalcli
```

### 3.2. Google Calendar APIの認証情報取得 (推奨)

`gcalcli`は基本的な認証機能を内蔵していますが、より安定した連携のため、自分専用のAPI認証情報（クライアントIDとシークレット）を取得し、設定することを推奨します。

<details>
<summary>【クリックで展開】クライアントIDとシークレットの取得手順</summary>

#### ステップ1: GCPプロジェクトの選択とAPIの有効化
1.  [Google Cloud Platform Console](https://console.cloud.google.com/) にアクセスします。
2.  新規プロジェクトを作成するか、既存のプロジェクトを選択します。
3.  左側ナビゲーションメニューから「**API とサービス**」 > 「**ライブラリ**」を選択します。
4.  「`Google Calendar API`」を検索し、**有効にする** をクリックします。

#### ステップ2: OAuth同意画面の設定
1.  左側ナビゲーションメニューから「**API とサービス**」 > 「**OAuth 同意画面**」を選択します。
2.  **ユーザーの種類**で「**外部**」を選択し、「作成」をクリックします。
3.  以下の必須項目を入力し、「保存して次へ」をクリックします。
    - **アプリ名**: `gcalcli-for-cursor` など、分かりやすい名前
    - **ユーザーサポートメール**: 自身のメールアドレス
    - **デベロッパーの連絡先情報**: 自身のメールアドレス
4.  **スコープの設定**: 何も追加せず、「保存して次へ」をクリックします。
5.  **テストユーザー**の画面で、「+ ADD USERS」をクリックし、Googleカレンダーを使用する自身のメールアドレスを追加します。「保存して次へ」をクリックします。

#### ステップ3: OAuthクライアントIDの作成
1.  左側ナビゲーションメニューから「**API とサービス**」 > 「**認証情報**」を選択します。
2.  「**+ 認証情報を作成**」をクリックし、「**OAuth クライアント ID**」を選択します。
3.  **アプリケーションの種類**で「**デスクトップアプリ**」を選択します。
4.  名前を入力（例: `gcalcli-desktop-client`）し、「作成」をクリックします。

#### ステップ4: 認証情報の確認と設定
1.  作成が完了すると、**クライアントID**と**クライアントシークレット**が表示されます。これを安全な場所にメモしてください。
2.  `gcalcli`は、初回実行時にこれらの情報を要求する場合があります。その際はターミナルに貼り付けて認証を進めてください。もし以前の認証情報が残っている場合は、`~/.gcalcli_oauth`ファイルを削除してから`gcalcli`を再実行すると、再度入力を求められます。

</details>

### 3.3. gcalcliとGoogleアカウントの連携

以下のコマンドを実行すると、ブラウザが開きGoogleアカウントとの連携を求められます。画面の指示に従って認証を完了させてください。

```sh
gcalcli list
```

認証が成功すると、利用可能なカレンダーの一覧が表示されます。

## 4. 日々の運用フロー

1.  **ユーザー**: 「今日のToDoは〇〇(60分)と△△(30分)」のように、やりたいことをAIに伝えます。（時間はAIに任せてもOK）
2.  **AI**: カレンダーの空き時間を自動で探し、最適なスケジュールを組み立てます。
3.  **AI**: スケジュールを元に、以下のような登録用コマンドを生成して提案します。
4.  **ユーザー**: 提案されたコマンドを承認（実行）するだけで、カレンダーへの一括登録が完了します。

## 5. AIが使用するコマンドの記録

**注記**: 以下のコマンド内の `'your_calendar_name_or_email@example.com'` は、ご自身のカレンダー名またはメールアドレスに置き換えてください。

### カレンダーの空き時間確認

AIは以下のコマンドで、指定されたカレンダーの今日の空き時間を確認します。

```sh
gcalcli --calendar 'your_calendar_name_or_email@example.com' calm --nostarted
```

### 予定の追加（単体・非対話）

AIが予定を追加する際の、基本となるコマンド形式です。`--noprompt` をつけることで、対話なしで実行できます。

```sh
gcalcli add --noprompt --calendar 'your_calendar_name_or_email@example.com' --title '【イベントのタイトル】' --when '【日時、例: today 10am】' --duration '【期間(分)】'
```

### 予定の追加（複数・一括）

複数の予定を一度に追加する場合は、`&&` でコマンドを繋ぎます。

```sh
gcalcli add --noprompt --calendar 'your_calendar_name_or_email@example.com' --title 'タスクA' --when 'today 10:00' --duration 90 && gcalcli add --noprompt --calendar 'your_calendar_name_or_email@example.com' --title 'タスクB' --when 'today 14:00' --duration 60
```
---
**ガイド作成日**: 2024-06-21
**最終更新日**: 2024-06-21 